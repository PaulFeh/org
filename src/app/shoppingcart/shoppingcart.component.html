<div
  class="fixed inset-0 bg-black bg-opacity-40 z-40 transition-opacity duration-300"
  *ngIf="sidebarOpen"
  tabindex="0"
  (click)="closeSidebar()"
  (keydown.enter)="closeSidebar()"
  (keydown.space)="closeSidebar()"
  aria-label="Close cart overlay"
></div>

<aside
  class="fixed top-0 right-0 h-full w-80 max-w-full bg-white shadow-2xl z-50 transform transition-transform duration-300 flex flex-col"
  [class.translate-x-full]="!sidebarOpen"
  [class.translate-x-0]="sidebarOpen"
  style="will-change: transform"
>
  <div class="flex items-center justify-between px-6 py-4 border-b">
    <h2 class="text-xl font-bold">Your Adopted Pets</h2>
    <button
      (click)="closeSidebar()"
      class="text-gray-500 hover:text-gray-800 text-2xl font-bold"
    >
      &times;
    </button>
  </div>
  <div class="flex-1 overflow-y-auto px-6 py-4">
    <ng-container *ngIf="adoptedPets().length > 0; else emptyCart">
      <ul class="space-y-4">
        <li *ngFor="let pet of adoptedPets()">
          <div class="flex items-center gap-3">
            <div
              class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 text-lg font-bold"
            >
              <span>{{ pet.name?.charAt(0) ?? '?' }}</span>
            </div>
            <div>
              <div class="font-semibold text-gray-800">
                {{ pet.name ?? 'Unknown' }}
              </div>
              <div class="text-xs text-gray-500">ID: {{ pet.id ?? 'N/A' }}</div>
            </div>
          </div>
        </li>
      </ul>
    </ng-container>

    <ng-template #emptyCart>
      <div class="text-center text-gray-500 py-12">
        <p class="text-lg font-medium">No adopted pets yet.</p>
        <p>Adopt a pet to see it here!</p>
      </div>
    </ng-template>
  </div>
</aside>
